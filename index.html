<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ðŸ’– Valentine LoveLock AR</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

  <!-- MindAR -->
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    body { 
      margin: 0; 
      overflow: hidden; 
      font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    }

    .hearts-container {
      position: fixed;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .heart {
      position: absolute;
      background: linear-gradient(45deg, #ff4081, #ff79a6);
      width: 20px;
      height: 20px;
      transform: rotate(45deg);
      opacity: 0.7;
      animation: float 8s infinite ease-in-out;
    }

    .heart:before,
    .heart:after {
      content: '';
      width: 20px;
      height: 20px;
      background: inherit;
      border-radius: 50%;
      position: absolute;
    }

    .heart:before { top: -10px; left: 0; }
    .heart:after { top: 0; left: -10px; }

    @keyframes float {
      0%,100% { transform: rotate(45deg) translateY(0); opacity: 0.7; }
      50% { transform: rotate(45deg) translateY(-20px); opacity: 0.4; }
    }

    #loading-screen {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      color: white;
    }

    .loading-heart {
      font-size: 60px;
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0%,100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }

    .loading-text {
      margin-top: 15px;
      font-size: 18px;
      color: #ff79a6;
      letter-spacing: 2px;
    }

    .hidden { display: none !important; }

    .camera-indicator {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.6);
      padding: 10px 20px;
      border-radius: 20px;
      color: white;
      font-size: 14px;
      z-index: 100;
      display: flex;
      align-items: center;
      gap: 10px;
      backdrop-filter: blur(5px);
    }
  </style>
</head>

<body>

<!-- Loading Screen -->
<div id="loading-screen">
  <div class="loading-heart">ðŸ’–</div>
  <div class="loading-text">MagicFrames by FotoMagic</div>
</div>

<!-- Floating Hearts -->
<div class="hearts-container" id="hearts-container"></div>

<!-- Camera Indicator -->
<div class="camera-indicator hidden" id="camera-indicator">
  <i class="fas fa-video"></i> Scanning for our memory...
</div>

<!-- AR Scene -->
<a-scene
  mindar-image="imageTargetSrc: targets.mind;"
  vr-mode-ui="enabled: false"
  device-orientation-permission-ui="enabled: false"
  loading-screen="enabled: false">

  <a-assets>
    <video id="arVideo" src="machafrndvideo.mp4" loop playsinline crossorigin="anonymous"></video>
  </a-assets>

  <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

  <a-entity mindar-image-target="targetIndex: 0">
    <a-video
      src="#arVideo"
      width="1.13"
      height="1.65"
      position="0 -0.11 0"
      visible="false">
    </a-video>
  </a-entity>

</a-scene>

<script>
  const video = document.querySelector("#arVideo");
  const videoElement = document.querySelector("a-video");
  const scene = document.querySelector("a-scene");
  const cameraIndicator = document.getElementById("camera-indicator");
  const loadingScreen = document.getElementById("loading-screen");
  const heartsContainer = document.getElementById("hearts-container");

  // Floating hearts
  function createHearts() {
    for (let i = 0; i < 15; i++) {
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.style.left = Math.random() * 100 + 'vw';
      heart.style.top = Math.random() * 100 + 'vh';
      heart.style.animationDelay = Math.random() * 5 + 's';
      heart.style.width = (Math.random() * 15 + 10) + 'px';
      heart.style.height = heart.style.width;
      heartsContainer.appendChild(heart);
    }
  }

  // AR target found
  scene.addEventListener("targetFound", () => {
    cameraIndicator.classList.remove('hidden');
    cameraIndicator.innerHTML = '<i class="fas fa-heart"></i> Playing our memory...';

    videoElement.setAttribute('visible', 'true');
    video.play().catch(err => console.log(err));
  });

  // AR target lost
  scene.addEventListener("targetLost", () => {
    video.pause();
    videoElement.setAttribute('visible', 'false');
    cameraIndicator.classList.add('hidden');
  });

  // Init
  window.addEventListener('load', () => {
    createHearts();
    setTimeout(() => loadingScreen.classList.add('hidden'), 1500);
  });

  video.addEventListener('error', e => console.error("Video error", e));
</script>

</body>
</html>
